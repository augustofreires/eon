#!/usr/bin/expect -f

set timeout 60

spawn ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no root@31.97.28.231

expect "password:"
send "62uDLW4RJ9ae28EPVfp5yzT##\r"

expect "root@"

send "cd /root/eon\r"
expect "root@"

send "echo '=== TESTANDO LOGIN ==='\r"
expect "root@"

send "curl -s -X POST http://localhost:3001/api/auth/login -H 'Content-Type: application/json' -d '{\"email\":\"admin@iaeon.com\",\"password\":\"admin123\"}'\r"
expect "root@"

send "echo '=== TESTANDO API ACCOUNT-INFO SEM TOKEN ==='\r"
expect "root@"

send "curl -v http://localhost:3001/api/auth/deriv/account-info\r"
expect "root@"

puts ""
puts "Testando APIs manualmente..."

send "exit\r"
expect eof