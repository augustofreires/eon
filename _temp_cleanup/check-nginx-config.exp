#!/usr/bin/expect -f

# Verificar configuração do Nginx
set timeout 120

spawn ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no root@31.97.28.231

expect {
    "password:" {
        send "62uDLW4RJ9ae28EPVfp5yzT##\r"
    }
}

expect "# "
send_user "🔍 Verificando configuração do Nginx\n"

# Verificar configuração do site
send "cat /etc/nginx/sites-enabled/iaeon.site\r"
expect "# "

send_user "\n📁 Verificando diretório web:\n"
send "ls -la /var/www/html/ | head -10\r"
expect "# "

send "ls -la /var/www/html/static/\r"
expect "# "

# Testar nginx config
send "nginx -t\r"
expect "# "

send_user "\n🌐 Testando diretamente:\n"
send "curl -I http://localhost/static/js/main.dba72426.js\r"
expect "# "

interact