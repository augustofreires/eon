#!/usr/bin/expect -f

set timeout 120
set password "62uDLW4RJ9ae28EPVfp5yzT##"

puts "ğŸš€ Conectando na VPS 31.97.28.231..."

# Conectar via SSH
spawn ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null root@31.97.28.231

expect {
    "*assword*" {
        send "$password\r"
        expect "*#*"

        puts "âœ… Conectado com sucesso!"

        # Verificar diretÃ³rio
        send "cd /var/www/iaeon && pwd\r"
        expect "*#*"

        puts "ğŸ“‹ VPS conectada - pronta para receber arquivos"
        puts "Mantenho a conexÃ£o aberta para vocÃª transferir os arquivos..."

        # Manter conexÃ£o interativa
        interact
    }
    "*yes/no*" {
        send "yes\r"
        exp_continue
    }
    "Connection refused" {
        puts "âŒ ConexÃ£o recusada"
        exit 1
    }
    timeout {
        puts "âŒ Timeout na conexÃ£o"
        exit 1
    }
}