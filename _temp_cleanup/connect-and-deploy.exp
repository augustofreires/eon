#!/usr/bin/expect -f

set timeout 120
set password "62uDLW4RJ9ae28EPVfp5yzT##"

puts "🚀 Conectando na VPS 31.97.28.231..."

# Conectar via SSH
spawn ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null root@31.97.28.231

expect {
    "*assword*" {
        send "$password\r"
        expect "*#*"

        puts "✅ Conectado com sucesso!"

        # Verificar diretório
        send "cd /var/www/iaeon && pwd\r"
        expect "*#*"

        puts "📋 VPS conectada - pronta para receber arquivos"
        puts "Mantenho a conexão aberta para você transferir os arquivos..."

        # Manter conexão interativa
        interact
    }
    "*yes/no*" {
        send "yes\r"
        exp_continue
    }
    "Connection refused" {
        puts "❌ Conexão recusada"
        exit 1
    }
    timeout {
        puts "❌ Timeout na conexão"
        exit 1
    }
}