#!/usr/bin/expect -f

set timeout 30

spawn ssh root@31.97.28.231

expect {
    "Enter passphrase for key" {
        send "\r"
        exp_continue
    }
    "password:" {
        send "62uDLW4RJ9ae28EPVfp5yzT##\r"
    }
    timeout {
        puts "Connection timeout"
        exit 1
    }
}

expect "root@"

send "cd /root/eon\r"
expect "root@"

# Testar login admin
send "curl -X POST http://localhost:3000/api/auth/login -H 'Content-Type: application/json' -d '{\"email\":\"admin@derivbots.com\",\"password\":\"admin123456\"}' -s\r"
expect "root@"

# Aguardar resposta
send "echo 'Admin login test completed'\r"
expect "root@"

send "exit\r"
expect eof