#!/usr/bin/expect -f

# Corrigir problema com arquivos est√°ticos
set timeout 120

spawn ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no root@31.97.28.231

expect {
    "password:" {
        send "62uDLW4RJ9ae28EPVfp5yzT##\r"
    }
}

expect "# "
send_user "üîç Investigando problema com arquivos est√°ticos\n"

# Verificar arquivos no servidor web
send "ls -la /var/www/html/static/js/\r"
expect "# "

send "ls -la /root/eon/client/build/static/js/\r"
expect "# "

send_user "üîÑ For√ßando c√≥pia dos arquivos corretos...\n"

# Remover arquivos antigos
send "rm -rf /var/www/html/static\r"
expect "# "

# Copiar arquivos novos
send "cp -r /root/eon/client/build/static /var/www/html/\r"
expect "# "

# Verificar se foi copiado corretamente
send "ls -la /var/www/html/static/js/\r"
expect "# "

# Ajustar permiss√µes
send "chown -R www-data:www-data /var/www/html/\r"
expect "# "

# Recarregar nginx
send "systemctl reload nginx\r"
expect "# "

send_user "‚úÖ Arquivos est√°ticos atualizados\n"

interact