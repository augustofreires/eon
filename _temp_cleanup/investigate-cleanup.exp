#!/usr/bin/expect -f

set timeout 60

spawn ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no root@31.97.28.231

expect {
   "password:" {
       send "62uDLW4RJ9ae28EPVfp5yzT##\r"
   }
}

expect "# "
send_user "ğŸ§¹ INVESTIGAÃ‡ÃƒO PARA LIMPEZA COMPLETA\n\n"

send "cd /root\r"
expect "# "

send_user "1. ğŸ“‚ DiretÃ³rios principais no root:\n"
send "ls -la | grep -E '^d'\r"
expect "# "

send_user "\n2. ğŸ—‚ï¸ Verificando projetos duplicados:\n"
send "find /root -maxdepth 2 -name '*.js' -o -name 'package.json' | grep -E 'server|client|eon|bots' | head -20\r"
expect "# "

send_user "\n3. ğŸ” Verificando arquivos auth.js duplicados:\n"
send "find /root -name 'auth.js' -type f\r"
expect "# "

send_user "\n4. ğŸ“‹ Tamanhos dos diretÃ³rios principais:\n"
send "du -sh /root/eon /root/bots-deriv 2>/dev/null || echo 'Some dirs not found'\r"
expect "# "

send_user "\n5. ğŸ” Verificando processos Node rodando:\n"
send "ps aux | grep node | grep -v grep\r"
expect "# "

send_user "\n6. ğŸ“Š PM2 status:\n"
send "pm2 list\r"
expect "# "

send_user "\n7. ğŸ—„ï¸ Verificando nginx configs:\n"
send "ls -la /etc/nginx/sites-*/ | head -10\r"
expect "# "

send_user "\n8. ğŸ  Verificando /var/www:\n"
send "ls -la /var/www/\r"
expect "# "

interact
