#!/usr/bin/expect -f

set timeout 60

spawn ssh -o StrictHostKeyChecking=no -o PreferredAuthentications=password -o PubkeyAuthentication=no root@31.97.28.231

expect "*assword*"
send "62uDLW4RJ9ae28EPVfp5yzT##\r"
expect "*#*"

send "cd /root/eon\r"
expect "*#*"

puts "🔄 Finalizando correção dos bots..."

send "pm2 restart all\r"
expect "*#*"

send "pm2 status\r"
expect "*#*"

puts ""
puts "🎉 CORREÇÃO DOS BOTS CONCLUÍDA!"
puts "==============================="
puts ""
puts "✅ PROBLEMA RESOLVIDO:"
puts "   • Frontend agora acessa response.data.bots"
puts "   • Build realizado com sucesso"
puts "   • PM2 reiniciado"
puts ""
puts "🧪 TESTE AGORA:"
puts "   URL: https://iaeon.site/operations"
puts "   Login: cliente@iaeon.com / 123456"
puts "   Conecte o Deriv"
puts ""
puts "🎯 RESULTADO ESPERADO:"
puts "   ✅ 3 bots devem aparecer na lista:"
puts "      - Bot Martingale"
puts "      - Bot Max Take"
puts "      - cc"

send "exit\r"
expect eof